describe IGMarkets::CLI::MarketsTable do
  it 'prints markets' do
    markets = [build(:market)]

    expect(IGMarkets::CLI::MarketsTable.new(markets).to_s).to eql(<<-END.strip
+--------+--------+------------+-----------+------------+-------+-------+-------+------+--------------+------------+
|                                                     Markets                                                      |
+--------+--------+------------+-----------+------------+-------+-------+-------+------+--------------+------------+
| EPIC   | Type   | Instrument | Status    | Expiry     | Bid   | Offer | High  | Low  | Change (net) | Change (%) |
+--------+--------+------------+-----------+------------+-------+-------+-------+------+--------------+------------+
| ABCDEF | Shares | Instrument | Tradeable | 2040-12-20 | 100.0 |  99.0 | 110.0 | 90.0 |         #{'10.0'.green} |       #{'10.0'.green} |
+--------+--------+------------+-----------+------------+-------+-------+-------+------+--------------+------------+
END
                                                                 )
  end
end
